<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>视频</title>
    <style>
        body {
            font-size: 17px;
            background-color: #f5f5f5;
        }

        #video-div {
            width: 500px;
            margin: 0 auto;
        }

        h1 {
            color: #7e7a7a;
            text-align: center;
        }

        h3 {
            color: #7e7a7a;
            text-align: center;
        }

        #mainone {
            background-color: #E8E8E8;
            font-size: 17px;
            padding: 34px;
            margin: 0 auto;
            font-family: -apple-system, SF UI Text, Arial, PingFang SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi Micro Hei, sans-serif, SimHei, SimSun;
            margin: 40px 80px;
        }

        #search {
            font-size: 16px;
            width: 520px;
            margin: 0 auto;
        }

        #maintwo {
            background-color: #E8E8E8;
            margin: 0 auto;
            font-family: -apple-system, SF UI Text, Arial, PingFang SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi Micro Hei, sans-serif, SimHei, SimSun;
            margin: 1px 80px;
        }

        button {
            font-size: 16px;

            border-radius: 5px;
            box-shadow: 3px 2px 14px #7e7a7a;
        }

        #button {
            width: 400px;
            margin: 0 auto;
        }

        input {
            width: 200px;
            height: 25px;
            padding: 0 10px;
            /* //指定输入框内部上下不留白，左右留白 10 像素。 */
            background-color: rgb(148, 148, 153);
            color: #fff;
        }

        #button-div {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }

        #start {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 14px;
        }

        button {
            padding: 10px 20px;
            margin-bottom: 10px;
            border: none;
            border-radius: 5px;
            background-color: #007BFF;
            color: #fff;
            font-size: 14px;
            cursor: pointer;
            height: 30px;
        }

        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>

<body>
    <div>
        <h1>我的视频页面</h1>
    </div>
    <div>
        <div id="search">
            <label for="searchInput">输入想要查看的第几个视频：</label>
            <input type="text" id="searchInput">
            <button onclick="search()">查找</button>
        </div>
        <div id="button">
            <div id="button-div" style="margin-top:20px">请输入从开始位置:
                <input type="text" id="start">
                <div >
                    <button onclick="start()" style="height: 40px;">开始</button>
                </div>
            </div>
            <div id="button-div">请输入结束位置:
                <input type="text" id="end">
                <div>
                    <button onclick="end()" style="height: 40px;margin-top: 10px;">结束</button>
                </div>
            </div>
            <button onclick="playVideo(startTime, endTime)" style="height: 40px;">播放视频片段</button>
        </div>

        <div id="mainone">
            <div id="video-div">
                <video width="500px" controls src="/videos/v02004d90000bjam8rg7q8i1sd06mda0.mp4" id="video"> </video>
            </div>
        </div>
        <div id="maintwo">
            <div id="button">
                <span><button id="start" style="margin-left: 7%;">start</button></span>
                <span><button id="pause" style="margin-left:25%;">pause</button></span>
                <span><button id="next" style="margin-left: 25%;">next</button></span>
            </div>
        </div>
        <div id="mainthree">
            <h3 id="comment">当前播放视频为1号视频"</h3>
        </div>

        <script>
            var videoFiles = ["v02004f40000bpgcqf51mikbqkhojceg.mp4","v02004e10000blqa44o858lv6e4b9kpg.mp4","v02004g10000c5rrikbc77u4rdiknfog.mp4","v02004g10000c5sagp3c77uek0luucag.mp4","v02004g10000c62uptrc77u43f69kg8g.mp4"];
            var currentVideoIndex = 0;
            var video = document.getElementById("video");
            var nextButton = document.getElementById("next");
            var videoDiv = document.getElementById("video-div");
            var comment = document.getElementById("comment");
            function search() {
                var searchText = document.getElementById("searchInput").value;
                if (searchText == "") {
                    alert("请输入数字");
                } else {
                    currentVideoIndex = parseInt(searchText) - 1;
                    // <!---减1是因为数组下标从0开始-->
                    if (currentVideoIndex < 0 || currentVideoIndex >= videoFiles.length) {
                        alert("输入的数字超出范围");
                        // <!---如果输入的数字超出范围，则提示-->
                        currentVideoIndex = 0;
                    }
                    video.src = "/videos/" + videoFiles[currentVideoIndex];
                }
            }

            function next() {
                currentVideoIndex++;
                if (currentVideoIndex >= videoFiles.length) {
                    currentVideoIndex = 0;
                }
                video.src = "/videos/" + videoFiles[currentVideoIndex];
                comment.innerHTML = "当前播放视频为" + (currentVideoIndex + 1) + "号视频";
            }

            video.onended = function () {
                next();
            };

            nextButton.onclick = function () {
                next();
            };
            document.getElementById("start").onclick = function () {
                video.play();
            }
            document.getElementById("pause").onclick = function () {
                video.pause();
            }
            document.getElementById("stop").onclick = function () {
                video.currentTime = 0;
            }
            function playVideo(startTime, endTime) {
                const video = document.getElementById('video');
                const videoWidth = Math.floor(video.getBoundingClientRect().width);
                const videoHeight = Math.floor(video.getBoundingClientRect().height);

                // 设置视频的宽度和高度
                video.width = videoWidth;
                video.height = videoHeight;

                // 设置视频的开始时间和结束时间
                video.ontimeupdate = function () {
                    if (video.currentTime >= startTime && video.currentTime <= endTime) {
                        video.play();
                    } else {
                        video.pause();
                    }
                };
            }
        </script>
</body>

</html>